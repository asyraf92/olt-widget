!function(){"use strict";function e(e){if(e.includes("T"))return new Date(e);let[t,i]=e.split(" "),[a,l,n]=t.split("-"),s=`${n}-${l}-${a} ${i}`;return new Date(s)}function t(t){let i=e(t),a=i.toLocaleDateString(window.launchCONFIG.dateFormat.locale,window.launchCONFIG.dateFormat.dateOptions),l;if(window.launchCONFIG.dateFormat.customTimeFormat&&window.launchCONFIG.dateFormat.timeOptions.hour12){let n=i.getHours(),s=i.getMinutes(),o=s.toString().padStart(2,"0"),r;l=`${0===n?12:n>12?n-12:n}:${o} ${r=n>=1&&n<12?"PG":n>=12&&n<14?"T/HARI":n>=14&&n<19?"PTG":n>=19&&n<24?"MLM":"T/MLM"}`}else l=i.toLocaleTimeString(window.launchCONFIG.dateFormat.locale,window.launchCONFIG.dateFormat.timeOptions);return{date:a,time:l,fullDate:i}}function i(e,t,i){return e.replace("{date}",t).replace("{time}",i)}function a(e){let t=document.getElementById("order_form");if(t){if(e){t.classList.add("form-disabled");let i=t.querySelectorAll("input, select, textarea, button");i.forEach(e=>{e.disabled=!0,e.setAttribute("data-was-disabled","true")})}else{t.classList.remove("form-disabled");let a=t.querySelectorAll("input, select, textarea, button");a.forEach(e=>{"true"===e.getAttribute("data-was-disabled")&&(e.disabled=!1,e.removeAttribute("data-was-disabled"))})}}}function l(e,t=!1,i="notAvailable"){let l=document.getElementById("form"),n=document.getElementById("statusMessage");if(l){switch(a(!1),l.classList.remove("hidden"),n.style.display="none",n.classList.remove("not-available","expired"),e){case"hide":l.classList.add("hidden");break;case"disable":a(!0)}t&&window.launchCONFIG.formBehavior.showMessagesWhenDisabled&&(n.classList.add("notAvailable"===i?"not-available":"expired"),n.style.display="block"),window.launchCONFIG.debugMode&&console.log(`üîß Form state: ${e}`,{showMessage:t,messageType:i})}}function n(e){let{hours:t=0,minutes:i=0,seconds:a=0}=e;return 36e5*t+6e4*i+1e3*a}function s(){if(!window.launchCONFIG){console.error("‚ùå launchCONFIG not found! Please define it before loading this script.");return}let a=e(window.launchCONFIG.availabilityDate).getTime(),s=e(window.launchCONFIG.expiryDate).getTime();!function e(){let t=document.getElementById("form"),i=document.getElementById("content");if(t){let a=function e(){let t=document.createElement("div");return t.className="availability-container",t.id="availabilityContainer",t.innerHTML=`
            <div class="countdown-timer" id="unifiedTimer">
                <h3 class="text-pre-line" id="timerTitle"></h3>
                <div class="timer-display" id="timerCountdown">
                    <div class="time-unit">
                        <span class="time-number" id="days">00</span>
                        <span class="time-label">Hari</span>
                    </div>
                    <div class="time-unit">
                        <span class="time-number" id="hours">00</span>
                        <span class="time-label">Jam</span>
                    </div>
                    <div class="time-unit">
                        <span class="time-number" id="minutes">00</span>
                        <span class="time-label">Minit</span>
                    </div>
                    <div class="time-unit">
                        <span class="time-number" id="seconds">00</span>
                        <span class="time-label">Saat</span>
                    </div>
                </div>
                <div class="status-message not-available" id="statusMessage">
                    <h2 id="messageTitle"></h2>
                    <div class="text-pre-line" id="messageText"></div>
                </div>
            </div>
        `,t}();t.parentNode.insertBefore(a,t),i&&(i.style.float="none")}}();let o=document.getElementById("unifiedTimer"),r=document.getElementById("timerTitle"),d=document.getElementById("messageTitle"),c=document.getElementById("messageText"),m=document.getElementById("days"),u=document.getElementById("hours"),p=document.getElementById("minutes"),$=document.getElementById("seconds"),h=!1;function g(){let m=new Date().getTime();if(o.classList.remove("warning","urgent","expired"),m<a){let u=t(window.launchCONFIG.availabilityDate);r.innerHTML=i(window.launchCONFIG.text.availabilityTitle,u.date,u.time),d.textContent=window.launchCONFIG.text.notAvailableTitle,c.textContent=window.launchCONFIG.text.notAvailableText,f(a-m),l(window.launchCONFIG.formBehavior.beforeAvailable,"show"!==window.launchCONFIG.formBehavior.beforeAvailable,"notAvailable")}else if(m>=a&&m<s){let p=s-m,$=t(window.launchCONFIG.expiryDate);r.innerHTML=i(window.launchCONFIG.text.expiryTitle,$.date,$.time),f(p),l("show",!1),function e(t){let i=n(window.launchCONFIG.warningThresholds.lowTime),a=n(window.launchCONFIG.warningThresholds.flashTime);t<=a&&t>0?o.classList.add("urgent"):t<=i&&t>0&&o.classList.add("warning")}(p),h||(setTimeout(()=>{let e=document.getElementById("order_form");if(e){let t=0;!function i(){t++;let a=document.querySelectorAll('img[loading="lazy"], img[data-src], .lazy'),l=e.getBoundingClientRect().top+window.pageYOffset,n=Array.from(a).filter(e=>{let t=e.getBoundingClientRect().top+window.pageYOffset;return t<l}),s=n.map(e=>e.complete?Promise.resolve():new Promise(t=>{let i=setTimeout(t,1e3);e.addEventListener("load",()=>{clearTimeout(i),t()},{once:!0})}));Promise.all(s).then(()=>{let a=e.getBoundingClientRect(),l=a.top+window.pageYOffset,n=document.querySelectorAll("header, .header, .navbar"),s=0;n.forEach(e=>{let t=window.getComputedStyle(e);"fixed"===t.position&&(s=Math.max(s,e.offsetHeight))});let o=Math.max(0,l-s-30);window.scrollTo({top:o,behavior:"smooth"}),setTimeout(()=>{let a=e.getBoundingClientRect(),n=a.top+window.pageYOffset;Math.abs(n-l)>20&&t<3&&(window.launchCONFIG.debugMode&&console.log(`Retrying scroll, attempt ${t+1}`),i())},1500),window.launchCONFIG.debugMode&&console.log(`Scrolled to order form (attempt ${t})`)})}()}},500),h=!0)}else o.classList.add("expired"),r.innerHTML=i(window.launchCONFIG.text.expiryTitle,t(window.launchCONFIG.expiryDate).date,t(window.launchCONFIG.expiryDate).time),d.textContent=window.launchCONFIG.text.expiredTitle,c.textContent=window.launchCONFIG.text.expiredText,f(0),l(window.launchCONFIG.formBehavior.afterExpiry,"show"!==window.launchCONFIG.formBehavior.afterExpiry,"expired"),clearInterval(y);!function t(){if(!window.launchCONFIG.stickyTimer.enabled)return;let i=document.getElementById("unifiedTimer"),a=document.body;i.classList.remove("sticky-top","sticky-bottom"),a.classList.remove("sticky-timer-top-active","sticky-timer-bottom-active");let l=new Date().getTime(),n=e(window.launchCONFIG.availabilityDate).getTime(),s=e(window.launchCONFIG.expiryDate).getTime(),o=!1;if((o=l<n?window.launchCONFIG.stickyTimer.beforeAvailable:l>=n&&l<s?window.launchCONFIG.stickyTimer.duringAvailable:window.launchCONFIG.stickyTimer.afterExpiry)&&!i.classList.contains("hidden")){let r="bottom"===window.launchCONFIG.stickyTimer.position?"sticky-bottom":"sticky-top",d="bottom"===window.launchCONFIG.stickyTimer.position?"sticky-timer-bottom-active":"sticky-timer-top-active";i.classList.add(r),a.classList.add(d),setTimeout(()=>{let e=i.offsetHeight,t=e+0;"bottom"===window.launchCONFIG.stickyTimer.position?a.style.paddingBottom=`${t}px`:a.style.paddingTop=`${t}px`,window.launchCONFIG.debugMode&&console.log(`Sticky applied: ${r}, Height: ${e}px, Padding: ${t}px`)},100)}else"bottom"===window.launchCONFIG.stickyTimer.position?a.style.paddingBottom="":a.style.paddingTop=""}()}function f(e){m.textContent=String(Math.floor(e/864e5)).padStart(2,"0"),u.textContent=String(Math.floor(e%864e5/36e5)).padStart(2,"0"),p.textContent=String(Math.floor(e%36e5/6e4)).padStart(2,"0"),$.textContent=String(Math.floor(e%6e4/1e3)).padStart(2,"0")}g();let y=setInterval(g,1e3);window.launchCONFIG.debugMode&&(console.log("\uD83D\uDE80 Simplified OLT Widget initialized"),console.log("\uD83D\uDCC5 Availability:",window.launchCONFIG.availabilityDate),console.log("\uD83D\uDCC5 Expiry:",window.launchCONFIG.expiryDate))}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",s):s()}();
